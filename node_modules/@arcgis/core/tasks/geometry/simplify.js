/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{urlToObject as r}from"../../core/urlUtils.js";import{getJsonType as t,getGeometryType as e}from"../../geometry/support/jsonUtils.js";import o from"../../request.js";async function i(e,i,f){const m="string"==typeof e?r(e):e,p=i[0].spatialReference,a=t(i[0]),u={...f,query:{...m.query,f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(s(i))}};return n((await o(m.path+"/simplify",u)).data,a,p)}function s(r){return{geometryType:t(r[0]),geometries:r.map((r=>r.toJSON()))}}function n(r,t,o){const i=e(t);return r.map((r=>{const t=i.fromJSON(r);return t.spatialReference=o,t}))}export{i as simplify};
