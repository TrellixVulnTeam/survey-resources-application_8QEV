/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as r}from"../chunks/tslib.es6.js";import"../core/has.js";import o from"../core/Logger.js";import{ensureType as e}from"../core/accessorSupport/ensureType.js";import{property as t}from"../core/accessorSupport/decorators/property.js";import{subclass as s}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import n from"../core/Collection.js";import{castForReferenceSetter as i,referenceSetter as c}from"../core/collectionUtils.js";import l from"../Graphic.js";const p=n.ofType(l);o.getLogger("esri.support.GraphicsCollection");let a=class extends p{constructor(r){super(r),this.on("before-add",(r=>{r.item||r.preventDefault()})),this.on("after-add",(r=>this._own(r.item))),this.on("after-remove",(({item:r})=>{r.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(r){r!==this._get("owner")&&(this._unownAll(),this._set("owner",r),this._ownAll())}_createNewInstance(r){return new p(r)}_ownAll(){this.items.forEach((r=>this._own(r)))}_own(r){r.layer&&"remove"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner}_unownAll(){this.items.forEach((r=>this._unown(r)))}_unown(r){r.layer===this.owner&&(r.layer=null)}};function h(r){const o=e(a,r);return o&&(o.owner=this),o}r([t()],a.prototype,"owner",null),a=r([s("esri.support.GraphicsCollection")],a);const u=(r="graphics")=>({type:a,cast:i,set(o){const e=c(o,this._get(r),a);e.owner=this,this._set(r,e)}});var m=a;export default m;export{a as GraphicsCollection,h as castGraphicsCollection,u as graphicsCollectionProperty};
