/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import e from"../Color.js";import{createThemes as o,getThemesforBasemap as n,getRawSchemes as a,filterSchemesByName as r,filterSchemesByTag as t}from"../smartMapping/symbology/support/symbologyUtils.js";import{toWorldScale as i}from"../smartMapping/symbology/support/utils.js";import m from"../smartMapping/symbology/support/colors.js";import{g as c,c as p}from"./size.js";const s={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},l="#aaaaaa",d=o({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:l,outline:s.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:l,outline:s.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polyline:{light:{common:{noDataColor:l,width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:l,width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polygon:{light:{common:{noDataColor:l,outline:s.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:l,outline:s.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}}}}}});function u(e){return n(d,e)}function y(e){const o="default",n=a({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:d.get(o)});if(!n)return;const{schemesInfo:r,basemapId:t,basemapTheme:i}=n,m=r.common,p=c({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),s=p&&p.primaryScheme;return{primaryScheme:v(e,r.primary,m,s),secondarySchemes:r.secondary.map((o=>v(e,o,m,s))).filter(Boolean),basemapId:t,basemapTheme:i}}function h(e){return r(e.name,y(e))}function g(e){return t(e.includedTags,e.excludedTags,y(e))}function w(o){if(!o)return;const n={...o};return n.colors=n.colors.map((o=>new e(o))),n.noDataColor&&(n.noDataColor=new e(n.noDataColor)),"outline"in n&&n.outline&&(n.outline={color:n.outline.color&&new e(n.outline.color),width:n.outline.width}),"sizeScheme"in n&&n.sizeScheme&&(n.sizeScheme=p(n.sizeScheme)),n}function v(e,o,n,a){const r=m[o];if(!r)return;const t=r[e.numColors]||r.stops,i="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=n;return f({name:r.name,tags:r.tags,colors:t,noDataColor:e.noDataColor,opacity:1,sizeScheme:a,outline:e.outline,size:e.size},i)}case"polyline":{const e=n;return z({name:r.name,tags:r.tags,colors:t,noDataColor:e.noDataColor,opacity:1,sizeScheme:a,width:e.width},i)}case"polygon":{const e=n,o=a;o&&o.marker&&null!=e.markerSize&&(o.marker.size=e.markerSize);return D({name:r.name,tags:r.tags,colors:t,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline,sizeScheme:o},i)}case"mesh":{const e=n;return C({name:r.name,tags:r.tags,colors:t,noDataColor:e.noDataColor,opacity:e.fillOpacity})}default:return}}function f(o,n){return{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),outline:{color:new e(o.outline.color),width:o.outline.width},size:n?i(o.size,n):o.size,sizeScheme:o.sizeScheme,opacity:o.opacity}}function z(o,n){return{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),width:n?i(o.width,n):o.width,sizeScheme:o.sizeScheme,opacity:o.opacity}}function D(o,n){const{sizeScheme:a}=o;return a.marker.size=n?i(a.marker.size,n):a.marker.size,{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),outline:{color:new e(o.outline.color),width:o.outline.width},sizeScheme:a,opacity:o.opacity}}function C(o){return{name:o.name,tags:[...o.tags],colors:o.colors.map((o=>new e(o))),noDataColor:new e(o.noDataColor),opacity:o.opacity}}var S=Object.freeze({__proto__:null,getThemes:u,getSchemes:y,getSchemeByName:h,getSchemesByTag:g,cloneScheme:w});export{u as a,h as b,w as c,g as d,y as g,S as p};
