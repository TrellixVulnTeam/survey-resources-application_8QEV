/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{c as t}from"../../../chunks/vec3f64.js";import{t as n,n as o}from"../../../chunks/vec3.js";import{a as r}from"../../../chunks/mat3f64.js";import{georeference as e}from"./georeference.js";function s(){const{faceDescriptions:t,faceVertexOffsets:n,uvScales:o}=g,r=4*t.length,e=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(2*t.length*3);let l=0,c=0,f=0,u=0;for(let h=0;h<t.length;h++){const r=t[h],p=l/3;for(const t of n)i[u++]=p+t;const m=r.corners;for(let t=0;t<4;t++){const n=m[t];let i=0;a[f++]=.25*o[t][0]+r.uvOrigin[0],a[f++]=r.uvOrigin[1]-.25*o[t][1];for(let t=0;t<3;t++)0!==r.axis[t]?(e[l++]=.5*r.axis[t],s[c++]=r.axis[t]):(e[l++]=.5*n[i++],s[c++]=0)}}return{position:e,normal:s,uv:a,faces:i}}function a(t=0){const n=Math.round(8*2**t),o=2*n,r=(n-1)*(o+1)+2*o,e=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(3*((n-1)*o*2));let l=0,c=0,f=0,u=0;for(let h=0;h<=n;h++){const t=h/n*Math.PI+.5*Math.PI,r=Math.cos(t),p=Math.sin(t);A[2]=p;const m=0===h||h===n,w=m?o-1:o;for(let g=0;g<=w;g++){const t=g/w*2*Math.PI;A[0]=-Math.sin(t)*r,A[1]=Math.cos(t)*r;for(let n=0;n<3;n++)e[l]=.5*A[n],s[l]=A[n],++l;a[c++]=(g+(m?.5:0))/o,a[c++]=h/n,0!==h&&g!==o&&(h!==n&&(i[f++]=u,i[f++]=u+1,i[f++]=u-o),1!==h&&(i[f++]=u,i[f++]=u-o,i[f++]=u-o-1)),u++}}return{position:e,normal:s,uv:a,faces:i}}function i(t=0){const n=5,o=Math.round(16*2**t),r=(n-1)*(o+1)+2*o,e=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(3*(4*o));let l=0,c=0,f=0,u=0,h=0;for(let p=0;p<=n;p++){const t=0===p||p===n,r=p<=1||p>=n-1,m=2===p||4===p,w=t?o-1:o;for(let g=0;g<=w;g++){const v=g/w*2*Math.PI,y=t?0:.5;A[0]=y*Math.sin(v),A[1]=y*-Math.cos(v),A[2]=p<=2?.5:-.5;for(let t=0;t<3;t++)e[l++]=A[t],s[c++]=r?2===t?p<=1?1:-1:0:2===t?0:A[t]/y;a[f++]=(g+(t?.5:0))/o,a[f++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,m||0===p||g===o||(p!==n&&(i[u++]=h,i[u++]=h+1,i[u++]=h-o),1!==p&&(i[u++]=h,i[u++]=h-o,i[u++]=h-o-1)),h++}}return{position:e,normal:s,uv:a,faces:i}}function l(t){const n=h.facingAxisOrderSwap[t],o=h.position,r=h.normal,e=new Float64Array(o.length),s=new Float32Array(r.length);let a=0;for(let i=0;i<4;i++){const t=a;for(let i=0;i<3;i++){const l=n[i],c=Math.abs(l)-1,f=l>=0?1:-1;e[a]=o[t+c]*f,s[a]=r[t+c]*f,a++}}return{position:e,normal:s,uv:new Float32Array(h.uv),faces:new Uint32Array(h.faces)}}const c=1,f=2,u=3,h={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[u,c,f],west:[-u,-c,f],north:[-c,u,f],south:[c,-u,f],up:[c,f,u],down:[c,-f,-u]}};function p(t,n,o){m(t),w(t,o&&o.size);const r=e(t,n,o);return{vertexAttributes:{position:r.position,normal:r.normal,uv:t.uv},components:[{faces:t.faces,material:o&&o.material||null}],spatialReference:n.spatialReference}}function m(t){for(let n=0;n<t.position.length;n+=3)t.position[n+2]+=.5}function w(t,r){if(null==r)return;const e="number"==typeof r?[r,r,r]:[null!=r.width?r.width:1,null!=r.depth?r.depth:1,null!=r.height?r.height:1];y[0]=e[0],y[4]=e[1],y[8]=e[2];for(let o=0;o<t.position.length;o+=3){for(let n=0;n<3;n++)A[n]=t.position[o+n];n(A,A,y);for(let n=0;n<3;n++)t.position[o+n]=A[n]}if(e[0]!==e[1]||e[1]!==e[2]){y[0]=1/e[0],y[4]=1/e[1],y[8]=1/e[2];for(let r=0;r<t.normal.length;r+=3){for(let n=0;n<3;n++)A[n]=t.normal[r+n];n(A,A,y),o(A,A);for(let n=0;n<3;n++)t.normal[r+n]=A[n]}}}const g={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},v={south:0,east:1,north:2,west:3,up:4,down:5},A=t(),y=r();export{v as boxFaceOrder,p as convertUnitGeometry,s as createUnitSizeBox,i as createUnitSizeCylinder,l as createUnitSizePlane,a as createUnitSizeSphere};
