/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{c as t}from"../../../chunks/vec3f64.js";import{t as e}from"../../../chunks/vec3.js";import{getSphericalPCPF as r}from"../../projectionEllipsoid.js";import{computeLinearTransformation as o}from"../../projection.js";import{a as n}from"../../../chunks/mat3f64.js";import{a as i}from"../../../chunks/mat4f64.js";import{f as s}from"../../../chunks/mat3.js";import{projectToECEF as a,projectNormalToECEF as c,projectTangentToECEF as f,projectFromECEF as m,projectNormalFromECEF as p,projectTangentFromECEF as u}from"./projection.js";function l(t,e,r){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const o=t.spatialReference;o.isWGS84||o.isWebMercator&&(!r||!1!==r.geographic)?h(t,e):j(t,e)}function h(t,n){const i=t.spatialReference,l=t.vertexAttributes.position,h=t.vertexAttributes.normal,j=t.vertexAttributes.tangent,g=new Float64Array(l.length),k=new Float32Array(h?h.length:0),y=new Float32Array(j?j.length:0),d=t.extent.center,w=A;o(i,[d.x,d.y,d.z],v,r(i)),s(b,v),e(w,n,b),a(l,i,g),h&&c(h,l,g,i,k),j&&f(j,l,g,i,y),x(g,w),m(g,l,i),h&&p(k,l,g,i,h),j&&u(y,l,g,i,j),t.vertexAttributesChanged()}function j(t,e){x(t.vertexAttributes.position,e),t.vertexAttributesChanged()}function x(t,e){if(t)for(let r=0;r<t.length;r+=3)for(let o=0;o<3;o++)t[r+o]+=e[o]}const A=t(),v=i(),b=n();export{l as offset};
