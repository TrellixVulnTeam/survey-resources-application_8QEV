/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as o}from"../chunks/tslib.es6.js";import"../core/has.js";import{clone as t}from"../core/lang.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import{enumeration as r}from"../core/accessorSupport/decorators/enumeration.js";import{subclass as s}from"../core/accessorSupport/decorators/subclass.js";import{writer as l}from"../core/accessorSupport/decorators/writer.js";import i from"../core/Error.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import m from"../core/Collection.js";import y from"./IconSymbol3DLayer.js";import a from"./ObjectSymbol3DLayer.js";import p from"./TextSymbol3DLayer.js";import c from"./Symbol3D.js";import{hasVisibleCallout as n,hasVisibleVerticalOffset as b,calloutProperty as u}from"./callouts/calloutUtils.js";import f from"./support/Symbol3DVerticalOffset.js";var S;const h=m.ofType({base:null,key:"type",typeMap:{icon:y,object:a,text:p}}),j=m.ofType({base:null,key:"type",typeMap:{icon:y,object:a}});let d=S=class extends c{constructor(o){super(o),this.verticalOffset=null,this.callout=null,this.symbolLayers=new h,this.type="point-3d"}writeSymbolLayers(o,t,e,r){const s=o.filter((o=>"text"!==o.type));if(r&&r.messages&&s.length<o.length){const t=o.find((o=>"text"===o.type));r.messages.push(new i("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:t}))}t[e]=s.map((o=>o.write({},r))).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const o of this.symbolLayers.items)switch(o.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return n(this)}hasVisibleVerticalOffset(){return b(this)}clone(){return new S({verticalOffset:t(this.verticalOffset),callout:t(this.callout),styleOrigin:t(this.styleOrigin),symbolLayers:t(this.symbolLayers),thumbnail:t(this.thumbnail)})}static fromSimpleMarkerSymbol(o){return new S({symbolLayers:[y.fromSimpleMarkerSymbol(o)]})}static fromPictureMarkerSymbol(o){return new S({symbolLayers:[y.fromPictureMarkerSymbol(o)]})}static fromCIMSymbol(o){if(o.data&&o.data.symbol){const t=o.data.symbol;if("CIMPointSymbol"===t.type&&t.callout)return new S({symbolLayers:[y.fromCIMSymbol(o)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new S({symbolLayers:[y.fromCIMSymbol(o)]})}static fromTextSymbol(o){return new S({symbolLayers:[p.fromTextSymbol(o)]})}};o([e({type:f,json:{write:!0}})],d.prototype,"verticalOffset",void 0),o([e(u)],d.prototype,"callout",void 0),o([e({type:h,json:{type:j,origins:{"web-scene":{type:j}}}})],d.prototype,"symbolLayers",void 0),o([l("web-scene","symbolLayers")],d.prototype,"writeSymbolLayers",null),o([r({PointSymbol3D:"point-3d"},{readOnly:!0})],d.prototype,"type",void 0),d=S=o([s("esri.symbols.PointSymbol3D")],d);var L=d;export default L;
