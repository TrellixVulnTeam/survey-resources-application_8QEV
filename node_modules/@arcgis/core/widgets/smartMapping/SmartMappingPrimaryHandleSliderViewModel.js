/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../core/has.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{property as t}from"../../core/accessorSupport/decorators/property.js";import{subclass as r}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import s from"./SmartMappingSliderViewModel.js";let n=class extends s{constructor(e){super(e),this.handlesSyncedToPrimary=!0}set primaryHandleEnabled(e){this._set("primaryHandleEnabled",e)}get primaryHandleEnabled(){const{stops:e}=this;if(!e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}get values(){const{primaryHandleEnabled:e,stops:t}=this;if(!t||!t.length||t.length<2)return[];const r=this.getValuesFromStops();return e?3===r.length?[r[0],r[1],r[2]]:[r[0],r[2],r[4]]:[r[0],r[r.length-1]]}setValue(e,t){const{max:r,min:s,values:n}=this;if(n[e]===(t=this.toPrecision(t))||t>r||t<s)return;if(this.primaryHandleEnabled){const r=this.values[1];(0===e&&t>r||2===e&&t<r)&&(t=r)}const i=this.getStopChanges(e,t);this.updateStops(i),this.notifyChange("values"),this.notifyChange("labels")}getStopIndexFromValueIndex(e){const{primaryHandleEnabled:t,stops:r}=this;return 0===e?0:t&&1===e?2:r.length-1}getStopChanges(e,t){return this.primaryHandleEnabled?1===e?this._getStopChangesAfterPrimaryHandleMove(e,t):this._getStopChangesAfterSecondaryHandleMove(e,t):super.getStopChanges(e,t)}_getStopChangesAfterPrimaryHandleMove(e,t){const{handlesSyncedToPrimary:r,stops:s,values:n}=this,i=this.getStopIndexFromValueIndex(e);if(r){const{max:r,min:i}=this,a=t-n[e],o=Math.max(Math.min(n[0]+a,r),i),l=Math.max(Math.min(n[2]+a,r),i);return 5===s.length?[{index:0,value:this.toPrecision(o)},{index:1,value:this.toPrecision((t+o)/2)},{index:2,value:t},{index:3,value:this.toPrecision((t+l)/2)},{index:4,value:this.toPrecision(l)}]:[{index:0,value:o},{index:1,value:t},{index:2,value:l}]}return 5===s.length?[{index:1,value:this.toPrecision((n[1]+n[0])/2)},{index:2,value:t},{index:3,value:this.toPrecision((n[1]+n[2])/2)}]:[{index:i,value:t}]}_getStopChangesAfterSecondaryHandleMove(e,t){const{stops:r,values:s}=this,n=this.getStopIndexFromValueIndex(e);if(5===r.length){return[{index:n,value:t},{index:0===n?1:3,value:this.toPrecision((t+s[1])/2)}]}return[{index:n,value:t}]}};e([t()],n.prototype,"handlesSyncedToPrimary",void 0),e([t()],n.prototype,"primaryHandleEnabled",null),e([t({readOnly:!0})],n.prototype,"values",null),n=e([r("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],n);var i=n;export default i;
