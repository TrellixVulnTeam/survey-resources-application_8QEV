/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{isSome as t}from"../../../core/maybe.js";import{formatDate as e}from"../../../intl/date.js";import n from"../../../Color.js";import r from"../../../renderers/visualVariables/SizeVariable.js";import{format as o}from"../../../renderers/support/numberUtils.js";import{timelineDateFormatOptions as i}from"../../../renderers/support/utils.js";function s(t){return e(new Date(t),i)}function a(t){return o(t)}function u(e,n,r){if(!t(n)||!t(e))return[];const o=[];for(let t=-1*r;t<=r;t++)0!==t&&o.push(n+t*e);return o}function p(t){const{max:e,min:n,padding:r,pathHeight:o,pathWidth:i,stops:s}=t,a=e-n;let u,p=`M0 0 L${i} 0 `;const h=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],m=Math.min.apply(Math,h.map((t=>t.size))),f=Math.max(Math.abs(h[0].size-h[1].size),Math.abs(h[2].size-h[1].size));return h.reverse(),h.forEach((({size:t,value:e},s)=>{const h=Math.round((t-m)/f*100)/100,c=Math.round(o-(e-n)/a*o);u=h*i,0===u&&(u=r*i),0===s&&(p+=`L${u} 0 `),p+=`L${u} ${c} `})),p+=`L${u} ${o} L0 ${o} L0 0 Z`,p}function h(t){const{bottomValue:e,bottomWidth:n,max:r,min:o,pathHeight:i,pathWidth:s,topValue:a,topWidth:u}=t,p=u*s,h=n*s,m=r-o,f=Math.round(i-(e-o)/m*i);return`M${p} 0 L${p} ${Math.round(i-(a-o)/m*i)} L${h} ${f} L${h} ${i} L0 ${i} L0 0 Z`}function m(t){let e=t.maxSize,n=t.minSize;return e instanceof r&&(e=e.stops[0].size),n instanceof r&&(n=n.stops[0].size),[e,n]}function f(t,e,n){const r=n.length-1,o=n[0],i=n[r]-o,s=e-t,a=[];for(let u=1;u<r;u++){const e=(n[u]-o)/i*s+t;a.push({index:u,value:e})}return a.unshift({index:0,value:t}),a.push({index:r,value:e}),a}function c(t){return t instanceof n?t.toCss(!0):n.fromString(t).toCss(!0)}export{s as formatDateLabel,a as formatNumberLabel,u as getDeviationValues,p as getDynamicPathForSizeStops,c as getFillFromColor,h as getPathForSizeStops,m as getSizesFromVariable,f as getStopChanges};
