/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{aliasOf as t}from"../core/accessorSupport/decorators/aliasOf.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{ignoreAbortErrors as o}from"../core/promiseUtils.js";import"./support/widgetUtils.js";import{messageBundle as l}from"./support/decorators/messageBundle.js";import{j as r}from"../chunks/index.js";import c from"./Widget.js";import n from"./Slice/SliceViewModel.js";const a="esri-slice",d={buttonDisabled:"esri-button--disabled",layerIncludeButton:"esri-icon-close esri-slice__cross",widgetIcon:"esri-icon-slice",base:`${a} esri-widget esri-widget--panel`,layerList:`${a}__settings`,layerListHeading:"esri-slice__settings-title esri-widget__heading",layerItem:`${a}__layer-item`,container:`${a}__container`,actionSection:"esri-slice__actions",hint:`${a}__hint`,hintText:`${a}__hint-text`,panelError:`${a}__panel--error`,newSliceButton:`${a}__clear-button esri-button esri-button--primary`,excludeButton:`${a}__exclude-button esri-button esri-button--secondary`,cancelButton:`${a}__cancel-button esri-button esri-button--secondary`};let u=class extends c{constructor(e,s){super(e,s),this.messages=null,this.iconClass=d.widgetIcon,this.label=void 0,this.view=null,this.viewModel=new n}render(){const e=this.viewModel.isSupported,s=this.viewModel.active,t="disabled"===this.viewModel.state,i="ready"===this.viewModel.state,o="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,l="exclude"===this.viewModel.layersMode,{messages:c}=this,n=t&&d.buttonDisabled,a=s&&!o||l?null:r("button",{disabled:t,class:this.classes(d.newSliceButton,n),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},c.newSlice),u=o&&!l?r("button",{class:this.classes(d.excludeButton,n),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},c.excludeLayer):null,p=s&&l?r("button",{class:this.classes(d.cancelButton,n),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},c.cancel):null;let y=null;s&&(l?y=c.excludeHint:i&&(y=c.hint));const h=y?r("div",{class:d.hint,key:"esri-slice__hint"},r("p",{class:d.hintText},y)):null,v=this.excludedLayers?this.excludedLayers.toArray().map((e=>r("li",{class:d.layerItem,key:e.uid},r("a",{href:"",onclick:()=>(this.excludedLayers.remove(e),!1),class:d.layerIncludeButton,title:c.includeLayer}),e.title))):[];this.excludeGroundSurface&&v.push(r("li",{class:d.layerItem,key:"ground"},r("a",{href:"",onclick:()=>(this.excludeGroundSurface=!1,!1),class:d.layerIncludeButton,title:c.includeLayer}),c.ground));const _=!l&&o&&v.length>0?r("div",{class:d.layerList,key:"esri-slice__settings"},r("h3",{class:d.layerListHeading},c.excludedLayers),r("ul",null,v)):null,m=r("div",{class:d.panelError,key:"esri-slice__unsupported"},r("p",null,c.unsupported)),b=r("div",{class:d.actionSection},u,p,a),w=this.visible?r("div",{class:d.container},e?[h,_,b]:m):null;return r("div",{class:d.base,role:"presentation"},w)}_onNewSliceClick(){o(this.viewModel.removeSliceAndStart())}};e([s(),l("esri/widgets/Slice/t9n/Slice")],u.prototype,"messages",void 0),e([s()],u.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u.prototype,"label",void 0),e([t("viewModel.view")],u.prototype,"view",void 0),e([t("viewModel.visible")],u.prototype,"visible",void 0),e([t("viewModel.active")],u.prototype,"active",void 0),e([s({type:n})],u.prototype,"viewModel",void 0),e([t("viewModel.excludedLayers")],u.prototype,"excludedLayers",void 0),e([t("viewModel.excludeGroundSurface")],u.prototype,"excludeGroundSurface",void 0),u=e([i("esri.widgets.Slice")],u);var p=u;export default p;
