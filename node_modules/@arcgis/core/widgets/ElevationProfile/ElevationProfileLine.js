/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import"../../core/has.js";import{isSome as e,applySome as o,isNone as r}from"../../core/maybe.js";import"../../core/Logger.js";import"../../core/accessorSupport/ensureType.js";import{handlesGroup as i}from"../../core/handleUtils.js";import{property as s}from"../../core/accessorSupport/decorators/property.js";import{subclass as l}from"../../core/accessorSupport/decorators/subclass.js";import"../../core/urlUtils.js";import{generateUUID as n}from"../../core/uuid.js";import"../../portal/support/resourceExtension.js";import{binaryFindClosest as p}from"../../core/arrayUtils.js";import{reactionInit as a,reaction as u}from"../../core/accessorSupport/trackingUtils.js";import c from"../../geometry/Point.js";import m from"../../core/Evented.js";import h from"../../Color.js";import{memoize as d}from"../../core/memoize.js";import{DEFAULT_DEM_RESOLUTION as v}from"./support/constants.js";import{convertSamples as f,convertStatistics as y}from"./support/unitUtils.js";let g=class extends m.EventedAccessor{constructor(t){super(t),this.type=null,this.id=n(),this.title=null,this.color=new h("#000000"),this.visible=!0,this._getSamplesMemoized=d(((t,e)=>f(t,e))),this._getStatisticsMemoized=d(((t,e)=>y(t,e))),this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0}get progress(){return e(this.result)&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){return o(this._viewModel.hoveredChartPosition,(t=>this._getPoint(t)))}get available(){return!0}get hasZ(){const t=this.result;return e(t)&&t.hasZ}get minDemResolution(){return v}queryElevation(){throw new Error("not implemented")}attach(t){return this._viewModel=t,i([a((()=>t.effectiveUnits),(t=>{this.effectiveUnits=t})),u((()=>[t.input]),(()=>this._onChange()))])}toggleVisibility(t){this.visible=void 0===t?!this.visible:t}_onChange(){this.emit("change")}_getPoint(t){const{samples:e,result:o}=this;if(r(e)||r(o))return null;const i=e.length;if(0===i)return null;const s=t*e[i-1].distance,{x:l,y:n,z:a}=p(e,s,(t=>t.distance));return r(a)?null:new c({x:l,y:n,z:a,spatialReference:o.spatialReference})}};t([s({nonNullable:!0})],g.prototype,"id",void 0),t([s({nonNullable:!0})],g.prototype,"title",void 0),t([s({type:h,nonNullable:!0})],g.prototype,"color",void 0),t([s({nonNullable:!0})],g.prototype,"visible",void 0),t([s({readOnly:!0})],g.prototype,"progress",null),t([s({readOnly:!0})],g.prototype,"samples",null),t([s({readOnly:!0})],g.prototype,"statistics",null),t([s()],g.prototype,"hoveredPoint",null),t([s()],g.prototype,"available",null),t([s()],g.prototype,"result",void 0),t([s()],g.prototype,"effectiveUnits",void 0),t([s()],g.prototype,"numSamplesForPreview",void 0),t([s()],g.prototype,"numSamplesPerChunk",void 0),t([s()],g.prototype,"chartFillEnabled",void 0),t([s()],g.prototype,"chartStrokeWidth",void 0),t([s()],g.prototype,"chartStrokeOffsetY",void 0),t([s({readOnly:!0})],g.prototype,"hasZ",null),t([s({readOnly:!0})],g.prototype,"minDemResolution",null),t([s()],g.prototype,"_viewModel",void 0),g=t([l("esri.widgets.ElevationProfile.ElevationProfileLine")],g);var j=g;export default j;export{g as ElevationProfileLine};
