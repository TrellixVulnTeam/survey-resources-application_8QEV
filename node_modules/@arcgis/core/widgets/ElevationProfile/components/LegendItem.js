/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import{destroyMaybe as s}from"../../../core/maybe.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as t}from"../../../core/accessorSupport/decorators/property.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import{substitute as o}from"../../../intl/substitute.js";import"../../../intl.js";import"../../support/widgetUtils.js";import{messageBundle as r}from"../../support/decorators/messageBundle.js";import{j as l}from"../../../chunks/index.js";import a from"../../Widget.js";import{LEGEND_ITEM_CSS as c}from"../css.js";import{Statistics as n}from"./Statistics.js";import{getTranslatedLineTitle as d}from"../support/intlUtils.js";let p=class extends a{constructor(e,s){super(e,s),this.expanded=!1,this.checkboxVisible=!0,this._messages=null}initialize(){this._statistics=new n(this._statisticsProps),this.own(this.watch("_statisticsProps",(e=>{this._statistics.set(e)})))}destroy(){this._statistics=s(this._statistics)}render(){const e=this.expanded;return l("div",{key:this,class:this.classes(c.base,{[c.disabled]:this.disabled,[c.expanded]:e})},this._renderColorIndicator(),l("div",{key:"header",class:c.header},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),e&&l("div",{key:"content",class:c.content},this._statistics.render()))}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return l("div",{key:"color-indicator",class:c.colorIndicator,styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){const e=this._messages,s=this.expanded?e.hideDetails:e.showDetails;return l("button",{key:"collapse-toggle",bind:this,class:c.collapseToggle,onclick:this._onCollapseToggleClick,title:s,"aria-label":s,type:"button"},l("span",{class:c.collapseToggleIcon}))}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){const{line:e,checkboxVisible:s,disabled:t}=this,i=`${c.base}__check-${e.id}`;return l("label",{key:"id",for:i,class:this.classes(c.label,{[c.labelDisabled]:t||!s})},s&&this._renderCheckbox(i),l("span",null,d(e,this._messages)))}_renderCheckbox(e){const s=this.line,t=s.visible,i=this.disabled,r=this._messages,a=t?r.hideProfile:r.showProfile,n=d(s,this._messages),p=o(a,{name:n});return l("button",{key:"checkbox",id:e,class:this.classes(c.checkbox,{[c.checkboxChecked]:t}),title:p,checked:t,disabled:i,role:"checkbox","aria-checked":t?"true":"false","aria-label":p,bind:this,onclick:e=>this._onCheckboxToggle(e,s)})}_onCheckboxToggle(e,s){e.stopPropagation(),s.toggleVisibility()}};e([t({nonNullable:!0})],p.prototype,"effectiveUnits",void 0),e([t({nonNullable:!0})],p.prototype,"line",void 0),e([t()],p.prototype,"expanded",void 0),e([t()],p.prototype,"disabled",null),e([t()],p.prototype,"checkboxVisible",void 0),e([t()],p.prototype,"onExpandedToggle",void 0),e([t()],p.prototype,"_statistics",void 0),e([t(),r("esri/widgets/ElevationProfile/t9n/ElevationProfile")],p.prototype,"_messages",void 0),p=e([i("esri.widgets.ElevationProfile.LegendItem")],p);export{p as LegendItem};
