/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as t}from"../../../core/accessorSupport/decorators/property.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import i from"../../../core/Collection.js";import{init as o}from"../../../core/watchUtils.js";import"../../support/widgetUtils.js";import{j as r}from"../../../chunks/index.js";import p from"../../Widget.js";import{LEGEND_CSS as n}from"../css.js";import{LegendItem as d}from"./LegendItem.js";let c=class extends p{constructor(e,t){super(e,t),this._items=new i,this._expandedLine=null}initialize(){this.own([o(this,"profiles",(e=>{this._destroyItems(),this._items.addMany(e.map((e=>this._createItemForLine(e))))})),this.watch("effectiveUnits",(e=>{this._items.forEach((t=>{t.effectiveUnits=e}))}))])}destroy(){this._destroyItems()}render(){return r("div",{class:n.base},this._items.toArray().map((e=>e.render())))}_onExpandedToggle(e){this._expandedLine=e===this._expandedLine?null:e,this._items.forEach((e=>e.expanded=e.line===this._expandedLine))}_createItemForLine(e){return new d({line:e,effectiveUnits:this.effectiveUnits,expanded:e===this._expandedLine,checkboxVisible:this.profiles.length>1,onExpandedToggle:()=>this._onExpandedToggle(e)})}_destroyItems(){this._items.drain((e=>e.destroy()))}};e([t()],c.prototype,"profiles",void 0),e([t()],c.prototype,"effectiveUnits",void 0),e([t()],c.prototype,"_items",void 0),e([t()],c.prototype,"_expandedLine",void 0),c=e([s("esri.widgets.ElevationProfile.Legend")],c);export{c as Legend};
