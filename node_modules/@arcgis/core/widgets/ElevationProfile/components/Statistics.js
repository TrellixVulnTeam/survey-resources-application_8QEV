/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import{applySome as e,isSome as s}from"../../../core/maybe.js";import"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as i}from"../../../core/accessorSupport/decorators/property.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import{formatDecimal as o,formatAngleDegrees as a}from"../../../core/unitFormatUtils.js";import{throttle as n}from"../../../core/throttle.js";import"../../support/widgetUtils.js";import{messageBundle as l}from"../../support/decorators/messageBundle.js";import{j as c}from"../../../chunks/index.js";import p from"../../Widget.js";import{STATISTICS_CSS as d}from"../css.js";import{FORMAT_PRECISION as m,NOT_AVAILABLE as u}from"../support/constants.js";const h=100;let v=class extends p{constructor(t,e){super(t,e),this._messagesUnits=null,this._updateLayout=t=>{const e=t.parentElement,s=t.style.display;e.removeChild(t),document.body.appendChild(t),t.style.display="block";let i=80;for(const r of t.childNodes)r instanceof HTMLElement&&(i=Math.max(i,r.offsetWidth));document.body.removeChild(t),e.appendChild(t),t.style.display=s,t.style.setProperty("--max-width",`${i}px`)},this._updateLayoutThrottled=n(this._updateLayout,h)}initialize(){this.own(this._updateLayoutThrottled)}render(){return c("div",{bind:this,class:d.base,afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled},this._renderStatistics())}_renderStatistics(){var t;const e=null==(t=this._messages)?void 0:t.statistics;return e?[this._renderDistanceStatistic("maxDistance",e.maxDistance),this._renderElevationStatistic("elevationGain",e.gain),this._renderElevationStatistic("elevationLoss",e.loss),this._renderElevationStatistic("minElevation",e.minElevation),this._renderElevationStatistic("maxElevation",e.maxElevation),this._renderElevationStatistic("avgElevation",e.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",e.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",e.avgSlope)]:[]}_renderDistanceStatistic(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.distance;return o(this._messagesUnits,t,e,m)}));return this._renderStatistic(e,s)}_renderElevationStatistic(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.elevation;return o(this._messagesUnits,t,e,m)}));return this._renderStatistic(e,s)}_renderSlopeStatistic(t,e,s){const i=c("div",{key:"slope-up",class:d.slopeValue},c("div",{class:d.slopeUpIcon}),this._renderValue(t,(t=>a(t,"degrees",m))),c("div",{class:d.slopeDownIcon}),this._renderValue(e,(t=>a(t,"degrees",m))));return this._renderStatistic(s,i)}_renderStatistic(t,e){return c("div",{class:d.statistic},c("label",{class:d.statisticLabel},t),c("div",{class:d.statisticValue},e))}_renderValue(t,i){const r=this.line,o=1===r.progress?r.statistics:null,a=e(o,(e=>e[t]));return s(a)?i(a):u}};t([i()],v.prototype,"effectiveUnits",void 0),t([i()],v.prototype,"line",void 0),t([i(),l("esri/widgets/ElevationProfile/t9n/ElevationProfile")],v.prototype,"_messages",void 0),t([i(),l("esri/core/t9n/Units")],v.prototype,"_messagesUnits",void 0),v=t([r("esri.widgets.ElevationProfile.Statistics")],v);export{v as Statistics};
