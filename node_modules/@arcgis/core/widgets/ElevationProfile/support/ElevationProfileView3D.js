/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{applySome as e,destroyMaybe as t}from"../../../core/maybe.js";import{reactionInit as i}from"../../../core/accessorSupport/trackingUtils.js";import s from"../../../core/Handles.js";import{ElevationProfileState as o}from"./constants.js";import{HoveredPoints as n}from"./HoveredPoints.js";import{InputRepresentation3D as r}from"./InputRepresentation3D.js";import{ProfileLines3D as p}from"./ProfileLines3D.js";class a{constructor(t,o){this._handles=new s,this._inputRepresentation=new r({view:t}),this._hoveredPoints=new n({view:t}),this._profileLines=new p({view:t}),this._handles.add([i((()=>o.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e))),i((()=>{const t=o.viewModel.input;return e(t,(e=>{e.commitProperty("geometry"),e.commitProperty("layer")})),{input:t,state:o.state,editable:o.editable}}),(e=>this._updateInputRepresentation(e))),i((()=>o.viewModel.chartData),(e=>this._profileLines.update(e))),i((()=>e(o.viewModel.input,(e=>e.geometry))),(()=>{this._profileLines.remove()}))])}destroy(){this._handles=t(this._handles),this._inputRepresentation=t(this._inputRepresentation),this._hoveredPoints=t(this._hoveredPoints),this._profileLines=t(this._profileLines)}_updateInputRepresentation({input:e,state:t,editable:i}){t===o.Selected?this._inputRepresentation.showHighlight(e):t!==o.Created||i?this._inputRepresentation.remove():this._inputRepresentation.showReshaping(e)}}export{a as ElevationProfileView3D};
