/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as s}from"../chunks/tslib.es6.js";import"../core/has.js";import"../core/Logger.js";import"../core/accessorSupport/ensureType.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import{subclass as t}from"../core/accessorSupport/decorators/subclass.js";import"../core/urlUtils.js";import"../core/uuid.js";import"../portal/support/resourceExtension.js";import{substitute as r}from"../intl/substitute.js";import{storeNode as o}from"../widgets/support/widgetUtils.js";import{messageBundle as i}from"../widgets/support/decorators/messageBundle.js";import{j as n}from"../chunks/index.js";import u from"../widgets/Widget.js";const l={base:"esri-identity-form",group:"esri-identity-form__group",label:"esri-identity-form__label",footer:"esri-identity-form__footer",esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},p="ArcGIS Online";let a=class extends u{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:u,messages:a}=this,d=n("div",{class:l.group},r(u?a.oAuthInfo:a.info,{server:/\.arcgis\.com/i.test(e)?p:e,resource:`(${t||a.lblItem})`})),c=u?null:n("div",{class:l.group},n("label",{class:l.label},a.lblUser,n("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:o,"data-node-ref":"_usernameInputNode",class:l.esriInput}))),m=u?null:n("div",{class:l.group},n("label",{class:l.label},a.lblPwd,n("input",{value:"",required:!0,type:"password",bind:this,afterCreate:o,"data-node-ref":"_passwordInputNode",class:l.esriInput}))),h=n("div",{class:this.classes(l.group,l.footer)},n("input",{type:"submit",disabled:!!i,value:i?a.lblSigning:a.lblOk,class:l.esriButton}),n("input",{type:"button",value:a.lblCancel,bind:this,onclick:this._cancel,class:this.classes(l.esriButton,l.esriButtonSecondary)})),b=s?n("div",null,s.details&&s.details.httpStatus?a.invalidUser:a.noAuthService):null;return n("form",{class:l.base,bind:this,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(s){s.preventDefault(),this._set("signingIn",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",e)}};s([e(),i("esri/identity/t9n/identity")],a.prototype,"messages",void 0),s([e()],a.prototype,"signingIn",void 0),s([e()],a.prototype,"server",void 0),s([e()],a.prototype,"resource",void 0),s([e()],a.prototype,"error",void 0),s([e()],a.prototype,"oAuthPrompt",void 0),a=s([t("esri.identity.IdentityForm")],a);var d=a;export default d;
