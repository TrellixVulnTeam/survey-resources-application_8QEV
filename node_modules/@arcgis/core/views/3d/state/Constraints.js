/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import"../../../core/has.js";import e from"../../../core/Logger.js";import"../../../core/accessorSupport/ensureType.js";import{property as i}from"../../../core/accessorSupport/decorators/property.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import"../../../core/urlUtils.js";import"../../../core/uuid.js";import"../../../portal/support/resourceExtension.js";import r from"../../../core/Accessor.js";import{earth as s}from"../../../geometry/support/Ellipsoid.js";import{clamp as n,deg2rad as a}from"../../../core/mathUtils.js";import{makePiecewiseLinearFunction as l}from"../support/mathUtils.js";const m=e.getLogger("esri.views.3d.state.Constraints");let c=class extends r{constructor(t){super(t),this.collision=new x,this.distance=1/0,this.minimumPoiDistance=4}get altitude(){return 2===this.mode?null:this._get("altitude")||null}set altitude(t){2!==this.mode?this._set("altitude",t):m.warn("Altitude constraint is ignored in local scenes")}clampAltitude(t){return this.altitude?n(t,this.altitude.min,this.altitude.max):t}clampTilt(t,e){if(!this.tilt)return e;const i=this.tilt(t);return n(e,i.min,i.max)}clampDistance(t){return Math.min(t,this.distance)}createDefaultTilt(){return 2===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()}createConstantMaxTilt(t){return(e,i=h)=>(i.min=d.min,i.max=t,i)}createDefaultTiltLocal(){const t=this.collision.enabled?l([[4e3,d.max],[1e4,a(88)],[6e6,a(88)]]):()=>d.max;return(e,i=h)=>(i.min=d.min,i.max=t(e),i)}createDefaultTiltGlobal(){const t=this.collision.enabled?l([[4e3,d.max],[5e4,a(88)],[6e6,a(88)],[2e7,d.min]]):l([[3e5,d.max],[3e6,a(88)],[6e6,a(88)],[2e7,d.min]]);return(e,i=h)=>(i.min=d.min,i.max=t(e),i)}};function p(t){return{min:-2e5,max:4*t.radius}}t([i()],c.prototype,"altitude",null),t([i({readOnly:!0})],c.prototype,"collision",void 0),t([i()],c.prototype,"distance",void 0),t([i({readOnly:!0})],c.prototype,"minimumPoiDistance",void 0),t([i()],c.prototype,"tilt",void 0),t([i({constructOnly:!0})],c.prototype,"mode",void 0),c=t([o("esri.views.3d.state.Constraints")],c);const u=p(s),d={min:a(.5),max:a(179.5)},h={min:0,max:0};let x=class extends r{constructor(){super(...arguments),this.enabled=!0,this.elevationMargin=5}};t([i({type:Boolean})],x.prototype,"enabled",void 0),t([i({type:Number})],x.prototype,"elevationMargin",void 0),x=t([o("esri.views.3d.state.Constraints.CollisionConstraint")],x);var f=c;export default f;export{c as Constraints,d as TiltDefault,u as earthAltitudeConstraint};
