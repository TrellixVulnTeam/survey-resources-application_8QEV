/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{isSome as s,unwrap as i}from"../../../../core/maybe.js";import{createDeferred as t}from"../../../../core/promiseUtils.js";class o{constructor(s,i,o){this.analysis=s,this.viewFactory=i,this.controllerFactory=o,this._promise=t(),this.analysisView=null,this.analysisController=null,this._load()}destroy(){s(this.analysisView)&&this.analysisView.destroy(),s(this.analysisController)&&this.analysisController.destroy()}get promise(){return this._promise.promise}async _load(){let t=!1;s(this.viewFactory)?this.analysisView=await this.viewFactory(this.analysis):t=!0,s(this.controllerFactory)?this.analysisController=await this.controllerFactory(this.analysis):t=!0,t?this._promise.reject("no view/controller factories available for analysis"):this._promise.resolve(i(this.analysisView))}}export{o as AnalysisManagerItem};
