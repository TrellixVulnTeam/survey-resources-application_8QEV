/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{isSome as e}from"../../../../../core/maybe.js";import{createScreenPointArray as t}from"../../../../../core/screenUtils.js";import{getConvertedElevation as i,getZForElevationMode as s}from"../../../../../support/elevationInfoUtils.js";import{makeDehydratedPoint as r}from"../../../../../layers/graphics/dehydratedFeatures.js";class o{constructor(e,t,i,s=null){this.elevationInfo=e,this.defaultZ=t,this.view=i,this.excludeGraphics=s}screenToMap(i){if(e(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(t(i.x,i.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const s=this.view.sceneIntersectionHelper.intersectElevationFromScreen(t(i.x,i.y),this.elevationInfo,0,this.excludeGraphics);return e(s)&&(s.z=void 0),s}mapToScreen(e){const t=r(e.x,e.y,i(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}class n{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return e(i)&&(i.z=s(i,this.view,this.elevationInfo)),i}mapToScreen(t){let s=t;return e(this.elevationInfo)&&(s=r(t.x,t.y,i(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(s)}}export{o as ElevationDrawSurface,n as SceneDrawSurface};
