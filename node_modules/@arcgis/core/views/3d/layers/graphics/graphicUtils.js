/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{isSome as t,isNone as e}from"../../../../core/maybe.js";import{getPointOnPath as r,getPathLength as n}from"../../../../geometry/support/coordsUtils.js";import{ringsCentroid as o}from"../../../../geometry/support/centroid.js";import{isFinite as i}from"../../../../core/mathUtils.js";import{O as s,d as u}from"../../../../chunks/vec3f64.js";import{g as a,e as m,f as l}from"../../../../chunks/mat4.js";import{create as c}from"../../../../geometry/support/aaBoundingRect.js";import{projectPoint as f}from"../../../../geometry/projection.js";import{a as p}from"../../../../chunks/mat4f64.js";import{f as h}from"../../../../chunks/vec2f64.js";import{d as g,O as y}from"../../../../chunks/vec4f64.js";import{s as d}from"../../../../chunks/vec4.js";import{isPoint as x,maximumDimension as j}from"../../../../geometry/support/aaBoundingBox.js";import{makeDehydratedPoint as b}from"../../../../layers/graphics/dehydratedFeatures.js";import{isHydratedGeometry as v,clonePoint as w}from"../../../../layers/graphics/hydratedFeatures.js";function R(t,e){if("point"===t.type)return F(t,e,!1);if(v(t))switch(t.type){case"extent":return F(t.center,e,!1);case"polygon":return F(t.centroid,e,!1);case"polyline":return F(k(t),e,!0);case"mesh":return F(t.extent.center,e,!1)}else switch(t.type){case"extent":return F(M(t),e,!0);case"polygon":return F(A(t),e,!0);case"polyline":return F(k(t),e,!0)}}function k(t){const e=t.paths[0];if(!e||0===e.length)return null;const o=r(e,n(e)/2);return b(o[0],o[1],o[2],t.spatialReference)}function M(t){const e=i(t.zmin);return b(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),e?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}function A(t){const e=t.rings[0];if(!e||0===e.length)return null;const r=o(t.rings,t.hasZ);return b(r[0],r[1],r[2],t.spatialReference)}function F(t,e,r){const n=r?t:w(t);return e&&t?f(t,n,e)?n:null:n}function P(t,e,r,n=0){if(t){e||(e=c());const o=t;let i=.5*o.width*(r-1),s=.5*o.height*(r-1);return o.width<1e-7*o.height?i+=s/20:o.height<1e-7*o.width&&(s+=i/20),d(e,o.xmin-i-n,o.ymin-s-n,o.xmax+i+n,o.ymax+s+n),e}return null}function z(t,e){for(let r=0;r<t.geometries.length;++r){const n=t.geometries[r].getMutableAttribute("auxpos1");n&&n.data[3]!==e&&(n.data[3]=e,t.geometryVertexAttrsUpdated(r))}}function B(e,r){const n=g(y);return t(e)&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),t(r)?n[3]=r:t(e)&&e.length>3&&(n[3]=e[3]),n}function D(e,r,n,o,i,s=[0,0,0,0]){for(let u=0;u<3;++u)t(e)&&null!=e[u]?s[u]=e[u]:t(n)&&null!=n[u]?s[u]=n[u]:s[u]=i[u];return t(r)?s[3]=r:t(o)?s[3]=o:s[3]=i[3],s}function I(t=s,r,n,o=1){const i=new Array(3);if(e(r)||e(n))i[0]=1,i[1]=1,i[2]=1;else{let e,o=0;for(let s=2;s>=0;s--){const u=t[s];let a;const m=null!=u,l=0===s&&!e&&!m,c=n[s];"symbol-value"===u||l?a=0!==c?r[s]/c:1:m&&"proportional"!==u&&isFinite(u)&&(a=0!==c?u/c:1),null!=a&&(i[s]=a,e=a,o=Math.max(o,Math.abs(a)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=e:0===i[t]&&(i[t]=.001*o)}for(let e=2;e>=0;e--)i[e]/=o;return u(i)}function U(t){return null!=t.isPrimitive}function O(t){return U(t)&&(t=[t.width,t.depth,t.height]),S(t)?null:"Symbol sizes may not be negative values"}function S(t){if(Array.isArray(t)){for(const e of t)if(!S(e))return!1;return!0}return null==t||t>=0}function V(t,e,r,n=p()){const o=t||0,i=e||0,s=r||0;return 0!==o&&a(n,n,-o/180*Math.PI),0!==i&&m(n,n,i/180*Math.PI),0!==s&&l(n,n,s/180*Math.PI),n}function Z(t,e){return null!=e.minDemResolution?e.minDemResolution:x(t)?e.minDemResolutionForPoints:.01*j(t)}const q={"bottom-left":h(0,0),bottom:h(.5,0),"bottom-right":h(1,0),left:h(0,.5),center:h(.5,.5),right:h(1,.5),"top-left":h(0,1),top:h(.5,1),"top-right":h(1,1)};export{R as computeCentroid,V as computeObjectRotation,I as computeObjectScale,Z as demResolutionForBoundingBox,P as enlargeExtent,S as isValidSize,B as mixinColorAndOpacity,q as namedAnchorToHUDMaterialAnchorPos,D as overrideColor,z as updateVertexAttributeAuxpos1w,O as validateSymbolLayerSize};
