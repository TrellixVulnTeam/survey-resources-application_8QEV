/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{i as t}from"../../../../../chunks/vec3.js";import{maxScale as e}from"../../../support/mathUtils.js";import{a as s}from"../../../../../chunks/mat4f64.js";import{sphere as i}from"../../../support/geometryUtils.js";import r from"../Octree.js";class h extends r{constructor(t,e){super((t=>i.wrap(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._tmpSphere=i.create(),this._tmpMat4=s(),this._instanceData=t,this._boundingSphere=e}addInstance(s){const i=this._instanceData.view.boundingSphere,r=this._instanceData.getCombinedModelTransform(s,this._tmpMat4);t(this._tmpSphere,this._boundingSphere.center,r),this._tmpSphere[3]=this._boundingSphere.radius*e(r),i.setVec(s,this._tmpSphere),this.add([s])}removeInstance(t){this.remove([t])}}export{h as InstanceOctree};
