/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as i}from"../../../../chunks/tslib.es6.js";import{ReloadableShaderModule as r}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{ShaderTechniqueConfiguration as o,parameter as e}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Default3D as s}from"../lib/DefaultVertexAttributeLocations.js";import a from"../../../webgl/Program.js";import{makePipelineState as n,separateBlendingParams as h,defaultColorWriteParams as g}from"../../../webgl/renderState.js";import{H as l}from"../../../../chunks/HighlightComposition.glsl.js";const m=8.6,c=.4;class p extends t{initializeProgram(i){const r=p.shader.get().build(this.configuration);return new a(i.rctx,r.generateSource("vertex"),r.generateSource("fragment"),s)}bindApplyPass(i){this.program.setUniform1i("tex",0),this.program.setUniform1i("origin",1),this.configuration.gridOptimization&&this.program.setUniform1i("coverageTex",2),this.program.setUniform4fv("color",i.color),this.program.setUniform4fv("haloColor",i.haloColor),this.program.setUniform1f("outlineSize",m),this.program.setUniform1f("blurSize",c),this.program.setUniform4f("opacities",i.haloOpacity,i.haloOpacityOccluded,i.fillOpacity,i.fillOpacityOccluded)}initializePipeline(){return 1===this.configuration.highlightStage?n({blending:h(770,1,771,771),colorWrite:g}):n({colorWrite:g})}get primitiveType(){return this.configuration.gridOptimization?4:5}}p.shader=new r(l,(()=>import("./HighlightComposition.glsl.js")));class f extends o{constructor(){super(...arguments),this.highlightStage=0,this.gridOptimization=!1}}i([e({count:3})],f.prototype,"highlightStage",void 0),i([e()],f.prototype,"gridOptimization",void 0);export{p as HighlightCompositionTechnique,f as HighlightCompositionTechniqueConfiguration};
