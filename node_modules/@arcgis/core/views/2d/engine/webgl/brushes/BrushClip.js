/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{f as t}from"../../../../../chunks/vec4f32.js";import{createProgram as r}from"../../../../webgl/programUtils.js";import s from"./WGLBrush.js";import{createProgramDescriptor as e}from"../Utils.js";import{background as o}from"../shaders/BackgroundPrograms.js";const i=()=>e("clip",{geometry:[{location:0,name:"a_pos",count:2,type:5122}]});class a extends s{constructor(){super(...arguments),this._color=t(0,1,0,1)}dispose(){this._program&&this._program.dispose()}prepareState({context:t}){t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setFaceCullingEnabled(!1),t.setColorMask(!1,!1,!1,!1),t.setStencilOp(7680,7680,7681),t.setStencilWriteMask(255),t.setStencilFunction(519,0,255)}draw(t,s){const{context:e,state:a}=t;this._program||(this._program=r(e,o));const n=this._program,m=i(),c=s.getVAO(e,a,m.attributes,m.bufferLayouts);e.bindProgram(this._program),n.setUniform2fv("u_coord_range",[1,1]),n.setUniform4fv("u_color",this._color),n.setUniformMatrix3fv("u_dvsMat3",a.displayMat3),e.bindVAO(c),e.drawElements(4,c.indexBuffer.size,5125,0),e.bindVAO()}}export default a;
