/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{getDeepValue as t}from"../core/object.js";import{replace as r}from"../core/string.js";import e from"../core/Logger.js";import{formatDate as n}from"./date.js";import{formatNumber as o}from"./number.js";const i=e.getLogger("esri.intl");function s(t,e,n={}){const{format:o={}}=n;return r(t,(t=>u(t,e,o)))}function u(r,e,n){let o,i;const s=r.indexOf(":");if(-1===s?o=r.trim():(o=r.slice(0,s).trim(),i=r.slice(s+1).trim()),!o)return"";const u=t(o,e);if(null==u)return"";const m=n[i]||n[o];return m?c(u,m):i?a(u,i):f(u)}function c(t,r){switch(r.type){case"date":return n(t,r.intlOptions);case"number":return o(t,r.intlOptions);default:return i.warn("missing format descriptor for key {key}"),f(t)}}function a(t,r){switch(r.toLowerCase()){case"dateformat":return n(t);case"numberformat":return o(t);default:return i.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?n(t):/^numberformat/i.test(r)?o(t):f(t)}}function f(t){switch(typeof t){case"string":return t;case"number":return o(t);case"boolean":return""+t;default:return t instanceof Date?n(t):""}}export{s as substitute};
