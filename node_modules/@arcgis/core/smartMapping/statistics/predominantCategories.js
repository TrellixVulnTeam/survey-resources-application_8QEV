/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{isSome as e}from"../../core/maybe.js";import r from"../../core/Error.js";import{verifyBasicFieldValidity as a}from"./support/utils.js";import{createLayerAdapter as t,getLayerTypeLabels as i}from"../support/adapters/support/layerUtils.js";async function o(o){if(!(o&&o.layer&&o.view&&o.fields))throw new r("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");const s=[0,2,1,3,4],{layer:n,...l}=o,p=t(n,s),m={layerAdapter:p,...l};if(!p)throw new r("predominant-categories:invalid-parameters","'layer' must be one of these types: "+i(s).join(", "));const d=e(m.signal)?{signal:m.signal}:null;await Promise.all([m.view.when(),p.load(d)]);const f=a(p,m.fields,"predominant-categories:invalid-parameters");if(f)throw f;return m}async function s(e){const{layerAdapter:r,...a}=await o(e);return r.predominantCategories(a)}export default s;
