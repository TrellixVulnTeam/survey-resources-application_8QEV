/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import r from"../../PopupTemplate.js";import{fetchMessageBundle as s}from"../../intl/messages.js";import{getContentFromFieldInfos as a,hasNormalizedField as n,getFieldAndExpressionInfos as t}from"./support/utils.js";async function o(r){const{layer:s,renderer:a}=r;await s.load();const n=a||s.renderer;if("class-breaks"!==n.type)throw new e("class-breaks-popup:invalid-parameters","renderer.type must be 'class-breaks'");return{layer:s,renderer:n}}async function i(e,s,n="divide"){const{fieldInfos:o,expressionInfos:i}=await t({renderer:e,layer:s,normFieldExpressionTemplate:n});return new r({content:await a(s,{fieldInfos:o,expressionInfos:i}),fieldInfos:o,expressionInfos:i})}async function p(e){const[{renderer:r,layer:a},t]=await Promise.all([o(e),s("esri/smartMapping/t9n/smartMapping")]),p={name:"class-breaks",title:t.classBreaks,value:await i(r,a)},l=[];return n(r)&&l.push({name:"class-breaks-percent",title:t.classBreaksNormFieldAsPercent,value:await i(r,a,"percentage")}),{primaryTemplate:p,secondaryTemplates:l}}export{p as getTemplates};
